#N canvas 389 363 812 564 12;
#X obj 81 15 inlet;
#X obj 81 101 route note bend timbre touch;
#X obj 81 457 outlet;
#X obj 149 202 mod 8;
#X obj 149 226 t f b;
#X obj 503 53 inlet;
#X obj 503 76 route voices channel;
#X obj 187 267 f 1;
#X obj 81 153 list split 3;
#X obj 81 352 list prepend note;
#X obj 81 318 list append;
#X obj 81 383 list prepend 1;
#X obj 81 426 list trim;
#X obj 286 201 mod 8;
#X obj 286 225 t f b;
#X obj 324 266 f 1;
#X obj 218 317 list append;
#X obj 218 382 list prepend 1;
#X obj 218 152 list split 1;
#X obj 218 351 list prepend bend;
#X obj 422 201 mod 8;
#X obj 422 225 t f b;
#X obj 460 266 f 1;
#X obj 354 317 list append;
#X obj 354 382 list prepend 1;
#X obj 354 351 list prepend timbre;
#X obj 354 152 list split 2;
#X obj 574 201 mod 8;
#X obj 574 225 t f b;
#X obj 612 266 f 1;
#X obj 506 317 list append;
#X obj 506 382 list prepend 1;
#X obj 506 152 list split 2;
#X obj 506 350 list prepend touch;
#N canvas 129 171 1178 717 remake-polyphony 1;
#X obj 88 89 inlet;
#X obj 88 113 route note bend timbre touch;
#X obj 88 186 list split 3;
#X obj 88 231 list split 1;
#X obj 101 271 list split 1;
#X obj 628 492 array size \$0-channel-substitutions;
#X obj 88 487 pack f f f f;
#X obj 88 456 f;
#X obj 189 486 array set \$0-channel-substitutions;
#X obj 629 524 array define \$0-channel-substitutions 17;
#X obj 88 425 t b f f;
#X obj 88 521 list prepend note;
#X obj 88 565 list trim;
#X obj 88 590 outlet;
#X obj 244 171 list split 1;
#X obj 284 201 array get \$0-channel-substitutions 0 1;
#X obj 244 288 pack f f;
#X obj 244 312 list prepend bend;
#X obj 244 255 spigot 0;
#X obj 189 454 * 1;
#X obj 175 397 t f f;
#X obj 284 225 t f f;
#X obj 628 203 array get \$0-channel-substitutions 0 1;
#X obj 588 257 spigot 0;
#X obj 628 227 t f f;
#X obj 588 173 list split 2;
#X obj 588 281 list append;
#X obj 588 309 list prepend timbre;
#X obj 955 198 array get \$0-channel-substitutions 0 1;
#X obj 915 252 spigot 0;
#X obj 955 222 t f f;
#X obj 915 168 list split 2;
#X obj 915 276 list append;
#X obj 915 304 list prepend touch;
#X text 170 559 needed note stealing \, and potentially only of a subset of the controller's output \, so implementing an internal [poly] object. notes in set an array with the new channel number at the index of their original channel number \, enabling xyz to lookup their new channels. one issue is that xyz sent before a note will not be assigned to the correct channel \, therefore this input will be dropped \, and only xyz occuring between noteon and off messages will be sent.;
#X msg 438 111 voices \$1;
#X text 621 559 (we use [else/voices] for now as has ability to change number of voices on the fly \, set to retrigger mode 1 \, which means repeated notes will retrigger on the same channel);
#X obj 88 370 unpack f f f;
#X obj 438 84 inlet;
#X text 625 462 size would be total input channels (+1 if starting from 1);
#X obj 88 397 + 1;
#X obj 88 346 else/voices 8 1;
#X obj 88 305 pack;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 14 0;
#X connect 1 2 25 0;
#X connect 1 3 31 0;
#X connect 2 0 3 0;
#X connect 2 1 8 1;
#X connect 3 0 42 0;
#X connect 3 1 4 0;
#X connect 4 0 6 1;
#X connect 4 1 42 1;
#X connect 6 0 11 0;
#X connect 7 0 6 0;
#X connect 10 0 7 0;
#X connect 10 1 6 3;
#X connect 10 2 19 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 14 0 18 0;
#X connect 14 1 15 0;
#X connect 15 0 21 0;
#X connect 16 0 17 0;
#X connect 17 0 12 0;
#X connect 18 0 16 0;
#X connect 19 0 8 0;
#X connect 20 0 6 2;
#X connect 20 1 19 1;
#X connect 21 0 18 1;
#X connect 21 1 16 1;
#X connect 22 0 24 0;
#X connect 23 0 26 0;
#X connect 24 0 23 1;
#X connect 24 1 26 1;
#X connect 25 0 23 0;
#X connect 25 1 22 0;
#X connect 26 0 27 0;
#X connect 27 0 12 0;
#X connect 28 0 30 0;
#X connect 29 0 32 0;
#X connect 30 0 29 1;
#X connect 30 1 32 1;
#X connect 31 0 29 0;
#X connect 31 1 28 0;
#X connect 32 0 33 0;
#X connect 33 0 12 0;
#X connect 35 0 41 0;
#X connect 37 0 40 0;
#X connect 37 1 7 1;
#X connect 37 2 20 0;
#X connect 38 0 35 0;
#X connect 40 0 10 0;
#X connect 41 0 37 0;
#X connect 42 0 41 0;
#X restore 81 68 pd remake-polyphony;
#X text 140 458 sends out channels from 0 \, as designed to be used with clone;
#X text 144 10 expects full mpe notes (i.e with release velocity) and touch as polytouch \, prepended as in route \, below;
#X text 76 490 Sam Knot (2023) KNOTTY library for Pure Data [knotty/are-we.pd] iamalonebutwearenot.com;
#X obj 697 79 f \$1;
#X obj 697 103 t f f;
#X obj 697 177 f;
#X obj 697 127 != 0;
#X obj 697 151 sel 1;
#X msg 697 201 voices \$1;
#X obj 697 53 loadbang;
#X connect 0 0 34 0;
#X connect 1 0 8 0;
#X connect 1 1 18 0;
#X connect 1 2 26 0;
#X connect 1 3 32 0;
#X connect 1 4 2 0;
#X connect 3 0 4 0;
#X connect 4 0 11 1;
#X connect 4 1 7 0;
#X connect 5 0 6 0;
#X connect 6 0 3 1;
#X connect 6 0 13 1;
#X connect 6 0 20 1;
#X connect 6 0 27 1;
#X connect 6 0 34 1;
#X connect 6 1 7 1;
#X connect 6 1 15 1;
#X connect 6 1 22 1;
#X connect 6 1 29 1;
#X connect 7 0 10 1;
#X connect 8 0 10 0;
#X connect 8 1 3 0;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 11 0 12 0;
#X connect 12 0 2 0;
#X connect 13 0 14 0;
#X connect 14 0 17 1;
#X connect 14 1 15 0;
#X connect 15 0 16 1;
#X connect 16 0 19 0;
#X connect 17 0 12 0;
#X connect 18 0 16 0;
#X connect 18 1 13 0;
#X connect 19 0 17 0;
#X connect 20 0 21 0;
#X connect 21 0 24 1;
#X connect 21 1 22 0;
#X connect 22 0 23 1;
#X connect 23 0 25 0;
#X connect 24 0 12 0;
#X connect 25 0 24 0;
#X connect 26 0 23 0;
#X connect 26 1 20 0;
#X connect 27 0 28 0;
#X connect 28 0 31 1;
#X connect 28 1 29 0;
#X connect 29 0 30 1;
#X connect 30 0 33 0;
#X connect 31 0 12 0;
#X connect 32 0 30 0;
#X connect 32 1 27 0;
#X connect 33 0 31 0;
#X connect 34 0 1 0;
#X connect 38 0 39 0;
#X connect 39 0 41 0;
#X connect 39 1 40 1;
#X connect 40 0 43 0;
#X connect 41 0 42 0;
#X connect 42 0 40 0;
#X connect 43 0 6 0;
#X connect 44 0 38 0;
